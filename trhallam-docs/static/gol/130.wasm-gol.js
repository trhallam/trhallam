"use strict";(self.webpackChunkwasm_rust_gol_ts=self.webpackChunkwasm_rust_gol_ts||[]).push([[130],{130:(t,e,i)=>{i.a(t,(async(t,r)=>{try{i.r(e);var s=i(841),n=i(110),h=t([s,n]);[s,n]=h.then?(await h)():h;class _{drawGrid(){let t=this.ctx;t.beginPath(),t.strokeStyle=this.GRID_COLOR;for(let e=0;e<=this.width;e++)t.moveTo(e*(this.CELL_SIZE+1)+1,0),t.lineTo(e*(this.CELL_SIZE+1)+1,(this.CELL_SIZE+1)*this.height+1);for(let e=0;e<=this.height;e++)t.moveTo(0,e*(this.CELL_SIZE+1)+1),t.lineTo((this.CELL_SIZE+1)*this.width+1,e*(this.CELL_SIZE+1)+1);t.stroke()}constructor(t){this.CELL_SIZE=5,this.GRID_COLOR="#CCCCCC",this.DEAD_COLOR="#FFFFFF",this.ALIVE_COLOR="#000000",this.getIndex=(t,e)=>t*this.width+e,this.drawCells=()=>{let t=this.universe.cells(),e=new Uint8Array(n.memory.buffer,t,this.width*this.height);this.ctx.beginPath();for(let t=0;t<this.height;t++)for(let i=0;i<this.width;i++){let r=this.getIndex(t,i);this.ctx.fillStyle=e[r]===s.fh.Dead?this.DEAD_COLOR:this.ALIVE_COLOR,this.ctx.fillRect(i*(this.CELL_SIZE+1)+1,t*(this.CELL_SIZE+1)+1,this.CELL_SIZE,this.CELL_SIZE)}this.ctx.stroke()},this.universe=s._D.new(),this.width=this.universe.width(),this.height=this.universe.height();let e=document.getElementById(t),i=e.getContext("2d");e.height=(this.CELL_SIZE+1)*this.height+1,e.width=(this.CELL_SIZE+1)*this.width+1,this.canvas=e,this.ctx=i}tick(){this.universe.tick()}}const a=new _("game-of-life-canvas"),o=()=>{a.tick(),a.drawGrid(),a.drawCells(),new Promise((t=>setTimeout(t,100))).then((()=>{requestAnimationFrame(o)}))};requestAnimationFrame(o),r()}catch(t){r(t)}}))},841:(t,e,i)=>{i.a(t,(async(t,r)=>{try{i.d(e,{_D:()=>n._D,fh:()=>n.fh});var s=i(110),n=i(411),h=t([s]);s=(h.then?(await h)():h)[0],(0,n.lI)(s),r()}catch(t){r(t)}}))},411:(t,e,i)=>{let r;function s(t){r=t}i.d(e,{Qn:()=>c,_D:()=>u,fh:()=>l,lI:()=>s});let n=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});n.decode();let h=null;function _(t,e){return t>>>=0,n.decode((null!==h&&0!==h.byteLength||(h=new Uint8Array(r.memory.buffer)),h).subarray(t,t+e))}let a=null;function o(){return(null===a||!0===a.buffer.detached||void 0===a.buffer.detached&&a.buffer!==r.memory.buffer)&&(a=new DataView(r.memory.buffer)),a}const l=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"}),d="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>r.__wbg_universe_free(t>>>0,1)));class u{static __wrap(t){t>>>=0;const e=Object.create(u.prototype);return e.__wbg_ptr=t,d.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,d.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_universe_free(t,0)}tick(){r.universe_tick(this.__wbg_ptr)}static new(){const t=r.universe_new();return u.__wrap(t)}render(){let t,e;try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.universe_render(n,this.__wbg_ptr);var i=o().getInt32(n+0,!0),s=o().getInt32(n+4,!0);return t=i,e=s,_(i,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}width(){return r.universe_width(this.__wbg_ptr)>>>0}height(){return r.universe_height(this.__wbg_ptr)>>>0}cells(){return r.universe_cells(this.__wbg_ptr)>>>0}}function c(t,e){throw new Error(_(t,e))}},110:(t,e,i)=>{var r=i(411);t.exports=i.v(e,t.id,"72dcf0a7908143605945",{"./wasm_rust_gol_bg.js":{__wbindgen_throw:r.Qn}})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQU8sR0FDSCxNQUFNSSxFQUFNdkMsRUFBS3dDLGVBQ2pCLE9BQU9WLEVBQVNDLE9BQU9RLEVBQzNCLENBSUEsTUFBQUUsR0FDSSxJQUFJQyxFQUNBQyxFQUNKLElBQ0ksTUFBTUMsRUFBUzVDLEVBQUs2QyxpQ0FBaUMsSUFDckQ3QyxFQUFLOEMsZ0JBQWdCRixFQUFReEYsS0FBSytFLFdBQ2xDLElBQUlZLEVBQUs5QixJQUFxQitCLFNBQVNKLEVBQVMsR0FBTyxHQUNuREssRUFBS2hDLElBQXFCK0IsU0FBU0osRUFBUyxHQUFPLEdBR3ZELE9BRkFGLEVBQWNLLEVBQ2RKLEVBQWNNLEVBQ1B0QyxFQUFtQm9DLEVBQUlFLEVBQ2xDLENBQUUsUUFDRWpELEVBQUs2QyxnQ0FBZ0MsSUFDckM3QyxFQUFLa0QsZ0JBQWdCUixFQUFhQyxFQUFhLEVBQ25ELENBQ0osQ0FJQSxLQUFBbEYsR0FFSSxPQURZdUMsRUFBS21ELGVBQWUvRixLQUFLK0UsYUFDdEIsQ0FDbkIsQ0FJQSxNQUFBdEUsR0FFSSxPQURZbUMsRUFBS29ELGdCQUFnQmhHLEtBQUsrRSxhQUN2QixDQUNuQixDQUlBLEtBQUF6RCxHQUVJLE9BRFlzQixFQUFLcUQsZUFBZWpHLEtBQUsrRSxhQUN0QixDQUNuQixFQUdHLFNBQVNtQixFQUFpQkMsRUFBTUMsR0FDbkMsTUFBTSxJQUFJQyxNQUFNOUMsRUFBbUI0QyxFQUFNQyxHQUM3QyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FzbS1ydXN0LWdvbC10cy8uL3NyYy9nb2wudHMiLCJ3ZWJwYWNrOi8vd2FzbS1ydXN0LWdvbC10cy8uL25vZGVfbW9kdWxlcy8ucG5wbS93YXNtLXJ1c3QtZ29sQGZpbGUrLi4rZGlzdCt3YXNtLXJ1c3QtZ29sL25vZGVfbW9kdWxlcy93YXNtLXJ1c3QtZ29sL3dhc21fcnVzdF9nb2wuanMiLCJ3ZWJwYWNrOi8vd2FzbS1ydXN0LWdvbC10cy8uL25vZGVfbW9kdWxlcy8ucG5wbS93YXNtLXJ1c3QtZ29sQGZpbGUrLi4rZGlzdCt3YXNtLXJ1c3QtZ29sL25vZGVfbW9kdWxlcy93YXNtLXJ1c3QtZ29sL3dhc21fcnVzdF9nb2xfYmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gT3JpZ2luYWwgdHV0b3JpYWwgZnJvbSB3YXNtLXBhY2sgYW5kIGNsYXNzIG1vZGlmaWNhdGlvbnMgYmFzZWQgdXBvblxuLy8gaHR0cHM6Ly9rZXJuaGFuZGEuZ2l0aHViLmlvL3R1dG9yaWFsLXR5cGVzY3JpcHQtY2FudmFzLWRyYXdpbmcvXG5cblxuaW1wb3J0IHsgVW5pdmVyc2UsIENlbGwgfSBmcm9tIFwid2FzbS1ydXN0LWdvbFwiO1xuaW1wb3J0IHsgbWVtb3J5IH0gZnJvbSBcIndhc20tcnVzdC1nb2wvd2FzbV9ydXN0X2dvbF9iZy53YXNtXCI7XG5cbmV4cG9ydCB0eXBlIENvbG91clZhbHVlSGV4ID0gYCMke3N0cmluZ31gO1xuXG5mdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5jbGFzcyBHT0xBcHAge1xuICAgIHByaXZhdGUgQ0VMTF9TSVpFOiBudW1iZXIgPSA1OyAvLyBwaXhlbHNcbiAgICBwcml2YXRlIEdSSURfQ09MT1I6IENvbG91clZhbHVlSGV4ID0gXCIjQ0NDQ0NDXCI7XG4gICAgcHJpdmF0ZSBERUFEX0NPTE9SOiBDb2xvdXJWYWx1ZUhleCA9IFwiI0ZGRkZGRlwiO1xuICAgIHByaXZhdGUgQUxJVkVfQ09MT1I6IENvbG91clZhbHVlSGV4ID0gXCIjMDAwMDAwXCI7XG4gICAgdW5pdmVyc2U6IFVuaXZlcnNlO1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBjdHg6IGFueVxuXG4gICAgZ2V0SW5kZXggPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XG4gICAgICAgIHJldHVybiByb3cgKiB0aGlzLndpZHRoICsgY29sdW1uO1xuICAgIH1cblxuICAgIGRyYXdHcmlkKCkge1xuICAgICAgICBsZXQgY3R4ID0gdGhpcy5jdHhcblxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuR1JJRF9DT0xPUjtcblxuICAgICAgICAvLyBWZXJ0aWNhbCBsaW5lcy5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy53aWR0aDsgaSsrKSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKGkgKiAodGhpcy5DRUxMX1NJWkUgKyAxKSArIDEsIDApO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyhpICogKHRoaXMuQ0VMTF9TSVpFICsgMSkgKyAxLCAodGhpcy5DRUxMX1NJWkUgKyAxKSAqIHRoaXMuaGVpZ2h0ICsgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIb3Jpem9udGFsIGxpbmVzLlxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSB0aGlzLmhlaWdodDsgaisrKSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKDAsIGogKiAodGhpcy5DRUxMX1NJWkUgKyAxKSArIDEpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbygodGhpcy5DRUxMX1NJWkUgKyAxKSAqIHRoaXMud2lkdGggKyAxLCBqICogKHRoaXMuQ0VMTF9TSVpFICsgMSkgKyAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9O1xuXG4gICAgZHJhd0NlbGxzID0gKCkgPT4ge1xuICAgICAgICBsZXQgY2VsbHNQdHIgPSB0aGlzLnVuaXZlcnNlLmNlbGxzKCk7XG4gICAgICAgIGxldCBjZWxscyA9IG5ldyBVaW50OEFycmF5KG1lbW9yeS5idWZmZXIsIGNlbGxzUHRyLCB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuaGVpZ2h0OyByb3crKykge1xuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgdGhpcy53aWR0aDsgY29sKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaWR4ID0gdGhpcy5nZXRJbmRleChyb3csIGNvbCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjZWxsc1tpZHhdID09PSBDZWxsLkRlYWRcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLkRFQURfQ09MT1JcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLkFMSVZFX0NPTE9SO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoXG4gICAgICAgICAgICAgICAgICAgIGNvbCAqICh0aGlzLkNFTExfU0laRSArIDEpICsgMSxcbiAgICAgICAgICAgICAgICAgICAgcm93ICogKHRoaXMuQ0VMTF9TSVpFICsgMSkgKyAxLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNFTExfU0laRSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DRUxMX1NJWkVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJZDogc3RyaW5nKSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgdW5pdmVyc2UsIGFuZCBnZXQgaXRzIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICAgIHRoaXMudW5pdmVyc2UgPSBVbml2ZXJzZS5uZXcoKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMudW5pdmVyc2Uud2lkdGgoKTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnVuaXZlcnNlLmhlaWdodCgpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgY2FudmFzIGlmIGFibGUgdG9cbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAodGhpcy5DRUxMX1NJWkUgKyAxKSAqIHRoaXMuaGVpZ2h0ICsgMTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gKHRoaXMuQ0VMTF9TSVpFICsgMSkgKiB0aGlzLndpZHRoICsgMTtcblxuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG5cbiAgICB9XG5cbiAgICB0aWNrKCkge1xuICAgICAgICB0aGlzLnVuaXZlcnNlLnRpY2soKTtcbiAgICB9XG5cbn1cblxuY29uc3QgYXBwID0gbmV3IEdPTEFwcCgnZ2FtZS1vZi1saWZlLWNhbnZhcycpO1xuY29uc3QgcmVuZGVyTG9vcCA9ICgpID0+IHtcbiAgICBhcHAudGljaygpO1xuICAgIGFwcC5kcmF3R3JpZCgpO1xuICAgIGFwcC5kcmF3Q2VsbHMoKTtcblxuICAgIHNsZWVwKDEwMCkudGhlbigoKSA9PiB7IHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXJMb29wKSB9KTtcbn07XG5cbnJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXJMb29wKTtcbiIsIlxuaW1wb3J0ICogYXMgd2FzbSBmcm9tIFwiLi93YXNtX3J1c3RfZ29sX2JnLndhc21cIjtcbmltcG9ydCB7IF9fd2JnX3NldF93YXNtIH0gZnJvbSBcIi4vd2FzbV9ydXN0X2dvbF9iZy5qc1wiO1xuX193Ymdfc2V0X3dhc20od2FzbSk7XG5leHBvcnQgKiBmcm9tIFwiLi93YXNtX3J1c3RfZ29sX2JnLmpzXCI7XG4iLCJsZXQgd2FzbTtcbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19zZXRfd2FzbSh2YWwpIHtcbiAgICB3YXNtID0gdmFsO1xufVxuXG5cbmNvbnN0IGxUZXh0RGVjb2RlciA9IHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgPyAoMCwgbW9kdWxlLnJlcXVpcmUpKCd1dGlsJykuVGV4dERlY29kZXIgOiBUZXh0RGVjb2RlcjtcblxubGV0IGNhY2hlZFRleHREZWNvZGVyID0gbmV3IGxUZXh0RGVjb2RlcigndXRmLTgnLCB7IGlnbm9yZUJPTTogdHJ1ZSwgZmF0YWw6IHRydWUgfSk7XG5cbmNhY2hlZFRleHREZWNvZGVyLmRlY29kZSgpO1xuXG5sZXQgY2FjaGVkVWludDhBcnJheU1lbW9yeTAgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXRVaW50OEFycmF5TWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVkVWludDhBcnJheU1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVkVWludDhBcnJheU1lbW9yeTAuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWNoZWRVaW50OEFycmF5TWVtb3J5MCA9IG5ldyBVaW50OEFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRVaW50OEFycmF5TWVtb3J5MDtcbn1cblxuZnVuY3Rpb24gZ2V0U3RyaW5nRnJvbVdhc20wKHB0ciwgbGVuKSB7XG4gICAgcHRyID0gcHRyID4+PiAwO1xuICAgIHJldHVybiBjYWNoZWRUZXh0RGVjb2Rlci5kZWNvZGUoZ2V0VWludDhBcnJheU1lbW9yeTAoKS5zdWJhcnJheShwdHIsIHB0ciArIGxlbikpO1xufVxuXG5sZXQgY2FjaGVkRGF0YVZpZXdNZW1vcnkwID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0RGF0YVZpZXdNZW1vcnkwKCkge1xuICAgIGlmIChjYWNoZWREYXRhVmlld01lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVkRGF0YVZpZXdNZW1vcnkwLmJ1ZmZlci5kZXRhY2hlZCA9PT0gdHJ1ZSB8fCAoY2FjaGVkRGF0YVZpZXdNZW1vcnkwLmJ1ZmZlci5kZXRhY2hlZCA9PT0gdW5kZWZpbmVkICYmIGNhY2hlZERhdGFWaWV3TWVtb3J5MC5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikpIHtcbiAgICAgICAgY2FjaGVkRGF0YVZpZXdNZW1vcnkwID0gbmV3IERhdGFWaWV3KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWREYXRhVmlld01lbW9yeTA7XG59XG4vKipcbiovXG5leHBvcnQgY29uc3QgQ2VsbCA9IE9iamVjdC5mcmVlemUoeyBEZWFkOjAsXCIwXCI6XCJEZWFkXCIsQWxpdmU6MSxcIjFcIjpcIkFsaXZlXCIsIH0pO1xuXG5jb25zdCBVbml2ZXJzZUZpbmFsaXphdGlvbiA9ICh0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnKVxuICAgID8geyByZWdpc3RlcjogKCkgPT4ge30sIHVucmVnaXN0ZXI6ICgpID0+IHt9IH1cbiAgICA6IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeShwdHIgPT4gd2FzbS5fX3diZ191bml2ZXJzZV9mcmVlKHB0ciA+Pj4gMCwgMSkpO1xuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFVuaXZlcnNlIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIHB0ciA9IHB0ciA+Pj4gMDtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShVbml2ZXJzZS5wcm90b3R5cGUpO1xuICAgICAgICBvYmouX193YmdfcHRyID0gcHRyO1xuICAgICAgICBVbml2ZXJzZUZpbmFsaXphdGlvbi5yZWdpc3RlcihvYmosIG9iai5fX3diZ19wdHIsIG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fd2JnX3B0cjtcbiAgICAgICAgdGhpcy5fX3diZ19wdHIgPSAwO1xuICAgICAgICBVbml2ZXJzZUZpbmFsaXphdGlvbi51bnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfdW5pdmVyc2VfZnJlZShwdHIsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAqL1xuICAgIHRpY2soKSB7XG4gICAgICAgIHdhc20udW5pdmVyc2VfdGljayh0aGlzLl9fd2JnX3B0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge1VuaXZlcnNlfVxuICAgICovXG4gICAgc3RhdGljIG5ldygpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS51bml2ZXJzZV9uZXcoKTtcbiAgICAgICAgcmV0dXJuIFVuaXZlcnNlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBkZWZlcnJlZDFfMDtcbiAgICAgICAgbGV0IGRlZmVycmVkMV8xO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLnVuaXZlcnNlX3JlbmRlcihyZXRwdHIsIHRoaXMuX193YmdfcHRyKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAwLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgICAgIGRlZmVycmVkMV8wID0gcjA7XG4gICAgICAgICAgICBkZWZlcnJlZDFfMSA9IHIxO1xuICAgICAgICAgICAgcmV0dXJuIGdldFN0cmluZ0Zyb21XYXNtMChyMCwgcjEpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKGRlZmVycmVkMV8wLCBkZWZlcnJlZDFfMSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgd2lkdGgoKSB7XG4gICAgICAgIGNvbnN0IHJldCA9IHdhc20udW5pdmVyc2Vfd2lkdGgodGhpcy5fX3diZ19wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBoZWlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHJldCA9IHdhc20udW5pdmVyc2VfaGVpZ2h0KHRoaXMuX193YmdfcHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY2VsbHMoKSB7XG4gICAgICAgIGNvbnN0IHJldCA9IHdhc20udW5pdmVyc2VfY2VsbHModGhpcy5fX3diZ19wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fdGhyb3coYXJnMCwgYXJnMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xufTtcblxuIl0sIm5hbWVzIjpbIkdPTEFwcCIsImRyYXdHcmlkIiwiY3R4IiwidGhpcyIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwiR1JJRF9DT0xPUiIsImkiLCJ3aWR0aCIsIm1vdmVUbyIsIkNFTExfU0laRSIsImxpbmVUbyIsImhlaWdodCIsImoiLCJzdHJva2UiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnRJZCIsIkRFQURfQ09MT1IiLCJBTElWRV9DT0xPUiIsImdldEluZGV4Iiwicm93IiwiY29sdW1uIiwiZHJhd0NlbGxzIiwiY2VsbHNQdHIiLCJ1bml2ZXJzZSIsImNlbGxzIiwiVWludDhBcnJheSIsIm1lbW9yeSIsImJ1ZmZlciIsImNvbCIsImlkeCIsImZpbGxTdHlsZSIsIkRlYWQiLCJmaWxsUmVjdCIsIm5ldyIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwidGljayIsImFwcCIsInJlbmRlckxvb3AiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0aGVuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2FzbSIsIl9fd2JnX3NldF93YXNtIiwidmFsIiwiY2FjaGVkVGV4dERlY29kZXIiLCJUZXh0RGVjb2RlciIsIm1vZHVsZSIsInJlcXVpcmUiLCJpZ25vcmVCT00iLCJmYXRhbCIsImRlY29kZSIsImNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwIiwiZ2V0U3RyaW5nRnJvbVdhc20wIiwicHRyIiwibGVuIiwiYnl0ZUxlbmd0aCIsInN1YmFycmF5IiwiY2FjaGVkRGF0YVZpZXdNZW1vcnkwIiwiZ2V0RGF0YVZpZXdNZW1vcnkwIiwiZGV0YWNoZWQiLCJ1bmRlZmluZWQiLCJEYXRhVmlldyIsIkNlbGwiLCJPYmplY3QiLCJmcmVlemUiLCJBbGl2ZSIsIlVuaXZlcnNlRmluYWxpemF0aW9uIiwiRmluYWxpemF0aW9uUmVnaXN0cnkiLCJyZWdpc3RlciIsInVucmVnaXN0ZXIiLCJfX3diZ191bml2ZXJzZV9mcmVlIiwiVW5pdmVyc2UiLCJfX3dyYXAiLCJvYmoiLCJjcmVhdGUiLCJwcm90b3R5cGUiLCJfX3diZ19wdHIiLCJfX2Rlc3Ryb3lfaW50b19yYXciLCJmcmVlIiwidW5pdmVyc2VfdGljayIsInJldCIsInVuaXZlcnNlX25ldyIsInJlbmRlciIsImRlZmVycmVkMV8wIiwiZGVmZXJyZWQxXzEiLCJyZXRwdHIiLCJfX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyIiwidW5pdmVyc2VfcmVuZGVyIiwicjAiLCJnZXRJbnQzMiIsInIxIiwiX193YmluZGdlbl9mcmVlIiwidW5pdmVyc2Vfd2lkdGgiLCJ1bml2ZXJzZV9oZWlnaHQiLCJ1bml2ZXJzZV9jZWxscyIsIl9fd2JpbmRnZW5fdGhyb3ciLCJhcmcwIiwiYXJnMSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==